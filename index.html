<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Autenticando...</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
</head>
<body>Autenticando...
<script>
(function(){
  function getToken(){
    const sp = new URLSearchParams(location.search);
    const qTok = sp.get('token');
    if (qTok) return qTok.trim();
    const parts = location.pathname.split('/').filter(Boolean);
    const last = parts[parts.length - 1];
    return (last && last.toLowerCase() !== 'relay' && last.toLowerCase() !== 'index.html') ? last : null;
  }

  function iniciar(){
    const token = getToken();
    if(!token){
      document.body.textContent = 'Token n√£o encontrado.';
      return;
    }
    const form = document.createElement('form');
    form.method = 'POST';
    form.action = 'https://eleicoes.hmg.funpresp.com.br/api/voter-jwt-auth';
    form.style.display = 'none';

    const inp = document.createElement('input');
    inp.type = 'hidden';
    inp.name = 'token';
    inp.value = token;
    form.appendChild(inp);

    document.body.appendChild(form);
    form.submit();
  }

  if (document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', iniciar);
  } else {
    iniciar();
  }
})();
</script>
</body>
