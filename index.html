<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Autenticando...</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<script>
(function(){
  function extrairToken(){
    const sp = new URLSearchParams(location.search);
    const q = sp.get('token');
    if (q) return q.trim();
    // Caminho: .../relay/<token>
    const path = location.pathname.replace(/\/+$/,'');
    const parts = path.split('/').filter(Boolean);
    const iRelay = parts.lastIndexOf('relay');
    if (iRelay !== -1 && parts.length > iRelay + 1) {
      return parts[iRelay + 1].trim();
    }
    return null;
  }

  const token = extrairToken();
  if(!token){
    document.addEventListener('DOMContentLoaded', ()=> {
      document.body.textContent = 'Token n√£o encontrado.';
    });
    return;
  }

  // POST form-urlencoded: token=...
  const form = document.createElement('form');
  form.method = 'POST';
  form.action = 'https://eleicoes.hmg.funpresp.com.br/api/voter-jwt-auth';
  form.style.display = 'none';

  const inp = document.createElement('input');
  inp.type = 'hidden';
  inp.name = 'token';
  inp.value = token;
  form.appendChild(inp);

  document.body.appendChild(form);
  form.submit();
})();
</script>
</head>
<body>Autenticando...</body>
</html>
